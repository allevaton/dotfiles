#!/usr/bin/bash
#
#
#

# In terms of battery percent
THRESHOLD=90

dir=/sys/class/power_supply/BAT0

batstat=`cat $dir/status`

max=`cat $dir/energy_full_design`
cur=`cat $dir/energy_now`

percent=`echo "$cur / $max * 100" | bc -l | sed 's/\..*//'`

if [ $batstat == "Discharging" ]
then
    if [ $percent -le $THRESHOLD ]
    then
        notify-send -u critical "Battery Low" "Your battery is at $percent%"
    fi
fi

if [ "$1" == "-v" ]
then
    echo "Battery percent: $percent%"
fi
